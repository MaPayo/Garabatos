<!doctype html>
<html lang="es">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Añadir estudiante — Garabatos (grupo 4)</title>
	
	<!-- Bootstrap 4.3.1 CSS -->
	<link rel="stylesheet" href="css/bootstrap-4.3.1.css">
</head>

<body>
	<!-- Header and navigation bar -->
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href="#">Garabatos (grupo 4)</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active"><a class="nav-link" href="#">Todos <span class="sr-only">(current)</span></a></li>
				<li class="nav-item"><a class="nav-link" href="#">ESO 1º B</a></li>
				<li class="nav-item"><a class="nav-link" href="#">ESO 2º B</a></li>
				<li class="nav-item"><a class="nav-link" href="#">ESO 2º C</a></li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Filtrar mensajes</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdown">
						<a class="dropdown-item" href="#">Enviados</a>
						<a class="dropdown-item" href="#">Recibidos</a>
						<a class="dropdown-item" href="#">Archivados</a>
						<a class="dropdown-item" href="#">Leidos</a>
						<a class="dropdown-item" href="#">Favoritos</a>
					</div>
				</li>
			</ul>
			<form class="form-inline my-2 my-lg-0">
				<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
				<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
			</form>
		</div>
	</nav>
	<!-- / Header and navigation bar -->
	
	<!-- Main container -->
	<div class="container-fluid">
		<div class="row">
			<!-- Left side bar -->
			<div class="col-sm-4">
				<div class="accordion" id="accordionExample">
					<div class="card">
						<div class="card-header" id="headingOne">
							<h2 class="mb-0">
								<button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Collapsible Group Item #1</button>
							</h2>
						</div>

						<div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
							<div class="card-body">Relleno.</div>
						</div>
					</div>
					<div class="card">
						<div class="card-header" id="headingTwo">
							<h2 class="mb-0">
								<button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Collapsible Group Item #2</button>
							</h2>
						</div>
						<div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
							<div class="card-body">Relleno.</div>
						</div>
					</div>
					<div class="card">
						<div class="card-header" id="headingThree">
							<h2 class="mb-0">
								<button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Collapsible Group Item #3</button>
							</h2>
						</div>
						<div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
							<div class="card-body">Relleno.</div>
						</div>
					</div>
				</div>
			</div>
			<!-- / Left side bar -->
			
			<!-- Main panel -->
			<div class="col-sm-8 anuncio">
				<form method="post">
					<div class="form-row datos-anuncio">
						<div class="form-group col-md-6">
							<label for="inputTitulo">Título del anuncio</label>
							<input type="text" class="form-control" id="inputTitulo" placeholder="Vendo Moto">
						</div>
						<div class="form-group col-md-6">
							<label for="inputCategorias">Categorías</label>
							<div class="input-group">
								<input type="text" class="form-control" readonly id="inputCategorias" placeholder="(ninguna)">
								<div class="input-group-append">
									<button class="btn btn-outline-secondary" type="button" data-toggle="modal" data-target="#modalSeleccionCategoria">Cambiar</button>
								</div>
							</div>
						</div>
					</div>
					<div class="form-row texto-anuncio">
						<div class="form-group col">
							<label for="inputTextoAnuncio">Cuerpo del anuncio</label>
							<textarea id="inputTextoAnuncio" class="form-control">Hello, World!</textarea>
						</div>
					</div>

					<div class="form-row justify-content-end">
						<button type="submit" id="boton-publicar" class="btn btn-primary">Publicar anuncio</button>
					</div>
				</form>
			</div>
			<!-- / Main panel -->
			
		</div>
	</div>
	<!-- / Main container -->
	
	<!-- Categories selection modal (triggered by a button) -->
	<div class="modal fade" id="modalSeleccionCategoria" tabindex="-1" role="dialog" aria-labelledby="tituloModalCategorias" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="tituloModalCategorias">Selección de Categorías de Anuncio</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<ul class="list-group" id="lista-categorias">
						<li class="list-group-item d-flex justify-content-between align-items-center" id="vehiculos">
							Vehículos
							<span class="badge badge-primary badge-pill">14</span>
						</li>
						<li class="list-group-item d-flex justify-content-between align-items-center" id="gangas">
							Gangas
							<span class="badge badge-primary badge-pill">2</span>
						</li>
						<li class="list-group-item d-flex justify-content-between align-items-center" id="vintage">
							Vintage
							<span class="badge badge-primary badge-pill">1</span>
						</li>
						<li class="list-group-item d-flex justify-content-between align-items-center" id="cat-larga">
							Otra categoría
							<span class="badge badge-primary badge-pill">2</span>
						</li>
						<li class="list-group-item d-flex justify-content-between align-items-center" id="cat-muylarga">
							Otra categoría
							<span class="badge badge-primary badge-pill">2</span>
						</li>
						<li class="list-group-item d-flex justify-content-between align-items-center" id="cat-maslargatodavia">
							Otra categoría
							<span class="badge badge-primary badge-pill">2</span>
						</li>
					</ul>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
					<button type="button" class="btn btn-primary" data-dismiss="modal" id="button-save-cats">Guardar y salir</button>
				</div>
			</div>
		</div>
	</div>
	<!-- / Categories selection modal (triggered by a button) -->

	<!-- jQuery 3.3.1 -->
	<script src="js/jquery-3.3.1.js"></script>
	<!-- Bootstrap 4.3.1 Javascript -->
	<script src="js/bootstrap.bundle-4.3.1.js"></script>
	<!-- Tinymce editor Javascript -->
	<script src="js/tinymce.min.js"></script>
	<!-- App specific Javascript -->
	<script type="text/javascript">
		tinymce.init({
			selector: '#inputTextoAnuncio',
			plugins: ['link image lists table'],
			toolbar: 'undo redo | bold italic backcolor | alignleft aligncenter alignjustify | bullist numlist outdent indent | image link table | removeformat',
			menubar: false,
		});
		$("#lista-categorias li").click((e) => {
			$(e.currentTarget).toggleClass("active");
		});
		$("#button-save-cats").click((e) => {
			$("#inputCategorias").val($("#lista-categorias li.active").toArray().map(o => o.id).join(" "));
		});
		$("#boton-publicar").click((e) => {
			let o = {
				titulo: $("#inputTitulo").val(), 
				cats: $("#inputCategorias").val(),
				text: tinymce.activeEditor.getContent()
			};
			console.log("Publicando anuncio, beep bop!", o);
			e.preventDefault();
		});
	</script>
</body>

</html>
